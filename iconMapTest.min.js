document.addEventListener("DOMContentLoaded",()=>{const e=(e,t=document)=>t.querySelector(e),t=`.icon-fab{position:fixed;left:0;bottom:0;z-index:10000;border:none;padding:10px 18px;font-weight:700;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,.2);background:var(--dark,var(--color-surface-elevated,#f00));color:#fff}.icon-fab:focus-visible{outline:3px solid rgba(74,108,247,.5)}.icon-overlay{position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.9);z-index:999999999999999;padding:24px}.icon-overlay[aria-hidden=false]{display:grid}.icon-modal{background:var(--light,#fff);color:var(--dark,#111);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35);width:max-content;max-height:min(90vh,900px);overflow:auto;padding:24px 16px 28px;position:relative}.icon-modal h2{margin:0 0 12px;font-size:20px;color:var(--dark,var(--color-surface-elevated,#f00));padding:0 8px}.icon-modal .close{position:absolute;top:10px;right:10px;background:transparent;border:none;font-size:22px;line-height:1;cursor:pointer}ul.icon-grid{display:grid!important;grid-template-columns:repeat(6,1fr);gap:12px;list-style:none;margin:0;padding:8px}.icon-card{text-align:center;border:1px solid var(--dark,var(--color-surface-elevated,#f00));border-radius:12px;background-color:var(--light,var(--color-background,#fff));box-shadow:0 4px 6px rgba(0,0,0,.08);transition:transform .15s ease,box-shadow .15s ease;cursor:pointer;user-select:none;aspect-ratio:1/1;width:120px;display:flex;padding:1rem!important;justify-content:center;align-items:center}.icon-card:hover{transform:translateY(-2px);box-shadow:0 8px 15px rgba(0,0,0,.15)}.icon-card i{font-size:30px;color:var(--dark,var(--color-surface-elevated,#222));display:block}.icon-card p{margin:10px 0 0;font-size:14px;color:var(--dark,var(--color-surface-elevated,#f00));font-weight:700;word-break:break-word}.icon-card::before{content:none!important}@media (prefers-reduced-motion:reduce){.icon-card{transition:none}}`,o=document.createElement("style");o.textContent=t,document.head.appendChild(o);const n=document.createElement("button");n.className="icon-fab",n.id="openIconOverlay",n.type="button",n.setAttribute("aria-haspopup","dialog"),n.setAttribute("aria-controls","iconOverlay"),n.textContent="Icons anzeigen",document.body.appendChild(n);const c=document.createElement("div");c.className="icon-overlay",c.id="iconOverlay",c.setAttribute("aria-hidden","true"),c.setAttribute("role","dialog"),c.setAttribute("aria-modal","true");const a=document.createElement("div");a.className="icon-modal",a.setAttribute("role","document");const d=document.createElement("button");d.className="close",d.type="button",d.setAttribute("aria-label","Schließen"),d.textContent="✕";const i=document.createElement("h2");i.textContent="IconMap – Test";const r=document.createElement("ul");r.className="icon-grid",r.id="iconGrid",r.setAttribute("aria-label","Icon-Auswahl"),a.appendChild(d),a.appendChild(i),a.appendChild(r),c.appendChild(a),document.body.appendChild(c);async function l(e){try{navigator.clipboard&&window.isSecureContext?await navigator.clipboard.writeText(e):(()=>{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)})()}catch(e){}}const s=(()=>{let e=null;function t(){e=document.activeElement,c.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",document.addEventListener("keydown",o),c.addEventListener("click",n),d.focus()}function o(e){"Escape"===e.key&&i()}function n(e){e.target===c&&i()}function i(){c.setAttribute("aria-hidden","true"),document.body.style.overflow="",document.removeEventListener("keydown",o),c.removeEventListener("click",n),e&&e.focus()}return{open:t,close:i}})(),u=Object.keys((window.cssData&&cssData["icon-map"])||{}),p=document.createDocumentFragment();u.forEach(e=>{const t=document.createElement("li");t.className="icon-card",t.dataset.icon=e,t.innerHTML=`<i class="icon icon-${e}" aria-hidden="true"></i><p>${e}</p>`,t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",`Icon ${e} kopieren`),p.appendChild(t)}),r.appendChild(p),r.addEventListener("click",e=>{const t=e.target.closest(".icon-card");t&&l(t.dataset.icon)}),r.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||!e.target.closest(".icon-card")||(e.preventDefault(),l(e.target.closest(".icon-card").dataset.icon))}),n.addEventListener("click",()=>s.open()),d.addEventListener("click",()=>s.close())});
